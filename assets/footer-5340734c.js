import{a as i,S as m}from"./vendor-5ef907e7.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function o(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=o(s);fetch(s.href,a)}})();class h{constructor(e){this.storageName=e}setValue(e){localStorage.setItem(this.storageName,JSON.stringify(e))}getValue(){return JSON.parse(localStorage.getItem(this.storageName))}removeItem(){localStorage.removeItem(this.storageName)}}class P{constructor(e){this.storageName=e,this.initStorage()}initStorage(){this.getAllProducts()||localStorage.setItem(this.storageName,JSON.stringify([]))}setProduct(e){e&&(this.getAllProducts().some(o=>o._id===e._id)||localStorage.setItem(this.storageName,JSON.stringify([...this.getAllProducts(),e])))}setAllProduct(e){localStorage.setItem(this.storageName,JSON.stringify(e))}getAllProducts(){return JSON.parse(localStorage.getItem(this.storageName))}removeProduct(e){this.setAllProduct(this.getAllProducts().filter(o=>o._id!==e))}removeAllProducts(){this.setAllProduct([])}}i.defaults.baseURL="https://food-boutique.b.goit.study/api";class y{constructor(){}async getProductCategories(){const{data:e}=await i("/products/categories");return e}async getProducts(e){const{data:o}=await i("/products",{params:{...e}});return o}async getProductDetails(e){const{data:o}=await i(`/products/${e}`);return o}async getPopularProducts(){const{data:e}=await i("/products/popular");return e}async getDiscountedProducts(){const{data:e}=await i("/products/discount");return e}async subscribeToNewsletter(e){return await i.post("/subscription",e,{headers:{"Content-Type":"application/json"}})}async placeOrder(e){const{data:o}=await i.post("/orders",e,{headers:{"Content-Type":"application/json"}});return o}}const p="/NEW_TANK_repository/assets/icons-tank-be86bfe5.svg",v="shop-storage";new h(v);let c=null;function E(){const t=document.querySelector(".modal-order-wrap");t&&(t.classList.add("modal-show-order"),document.body.classList.add("stop-scroll"),t.innerHTML=`
        <div class="modal-order-succ">
          <button type="button" class="modal-order-succ-btn">
            <svg class="modal-prod-close-icon" width='22' height='22'>
              <use href="${p}#icon-close"></use>
            </svg>
          </button>
          <div class="modal-prod-close-img-wrap">
            <svg class="modal-check" width='80' height='80'>
              <use href="${p}#icon-check"></use>
            </svg>
          </div>
          <p class="modal-success-title"></p>
          <p class="modal-success-message"></p>
        </div>
      `,c=t.querySelector(".modal-order-succ-btn"),c&&c.addEventListener("click",()=>u(t)),t.addEventListener("click",e=>S(e,t)),document.addEventListener("keydown",e=>w(e,t)))}function S(t,e){t.target===e&&u(e)}function w(t,e){t.keyCode===27&&u(e)}function u(t){c.removeEventListener("click",()=>u(t)),t.classList.remove("modal-show-order"),document.body.classList.remove("stop-scroll")}const b=new y,g=document.querySelector('form[name="E-mail"]'),n=document.getElementById("mail"),l=document.querySelector("#mail + span.error");n.addEventListener("input",function(t){n.validity.valid?(l.textContent="",l.className="error"):f()});g.addEventListener("submit",function(t){n.validity.valid||(f(),t.preventDefault())});function f(){n.validity.valueMissing?l.textContent="You need to enter an e-mail address.":n.validity.typeMismatch?l.textContent="Entered value needs to be an e-mail address.":n.validity.tooShort&&(l.textContent=`Email shouid be at least ${n.minLength} characters; you entered ${n.value.length}.`),l.className="error active"}g.addEventListener("submit",async function(t){t.preventDefault();const e=t.currentTarget.elements.email,o=e.value;try{const r=await b.subscribeToNewsletter({email:o});e.value="";let s="Thanks for subscribing!";r&&r.data&&r.data.message&&(s=r.data.message),m.fire({icon:"good",title:s,showConfirmButton:!0,confirmButtonColor:"#6D8434",showCanceButton:!1,usuallyClass:{popup:"small-popup",title:"usually-title",icon:"usually-icon"}})}catch(r){console.error("Error:",r);let s="Error. Try again.";r.resp&&r.resp.data&&r.resp.data.message&&(s=r.resp.data.message),m.fire({icon:"error",title:"Error",showConfirmButton:!0,confirmButtonColor:"#6D8434",showCanceButton:!1,text:s,usuallyClass:{popup:"small-popup",title:"usually-title",icon:"usually-icon"}})}});export{y as F,P as S,h as a,p as i,E as o};
//# sourceMappingURL=footer-5340734c.js.map
