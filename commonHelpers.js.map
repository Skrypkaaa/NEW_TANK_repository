{"version":3,"file":"commonHelpers.js","sources":["../src/js/cart/cart-content.js","../src/js/cart/cart-product-markup.js","../src/js/cart/cart-product-list.js","../src/js/cart/cart-main.js"],"sourcesContent":["import { ShopStorage } from '../local-storage';\n\nconst SHOP_STORAGE = 'shop-storage';\nconst Storageshop = new ShopStorage(SHOP_STORAGE);\nconst ContentcartWrap = document.querySelector('.cart-content-container');\nconst Cartempty = document.querySelector('.empty-cart');\n\ncartVisibillity();\n\nexport function cartVisibillity() {\n  if (Storageshop.getAllProducts().length) {\n    ContentcartWrap.classList.remove('is-hidden');\n    Cartempty.classList.add('is-hidden');\n  } else {\n    ContentcartWrap.classList.add('is-hidden');\n    Cartempty.classList.remove('is-hidden');\n  }\n}","export function cartProductMarkup(arr) {\n    return arr\n        .map(({ category, img, name, price, size, _id }) => {\n            return `<li class=\"cart-item\" data-id=\"${_id}\">\n                        <img class=\"cart-img-product\" src=\"${img}\" alt=\"${name}\" />\n                        <div class=\"cart-product-description\">\n                            <p class=\"cart-product-name\">${name}</p>\n                            <p class=\"cart-product-text\">Category: <span class=\"cart-text-black gap\">${category}</span>  Size: <span class=\"cart-text-black\">${size}</span></p>\n                            <p class=\"cart-product-price\">$${price}</p>\n                        </div>\n                        <button type=\"button\" class=\"cart-product-close-btn\">\n                            <svg class=\"cart-icon-close\">\n                                <use href=\"./icons-tank.svg#icon-close\"></use>\n                            </svg>\n                    </button>\n                    </li>`;\n        })\n    .join('');\n}","import { cartProductMarkup } from './cart-product-markup';\nimport { ShopStorage } from '../local-storage';\nimport { cartVisibillity } from './cart-content';\n\nlet arrCarts = [];\nconst cartNumberProduct = document.querySelector('.number-of-product');\nconst navSpan = document.querySelector('.nav-span');\nconst totalAmount = document.querySelector('.total-amount');\nconst cardListOrder = document.querySelector('.cart-list');\nconst shopStorage = new ShopStorage('shop-storage');\n\ncardListOrder.addEventListener('click', cartRemoveOrder);\n\nexport function changeNumberInCart(number) {\n    cartNumberProduct.textContent = number;\n    navSpan.textContent = number;\n}\n\nexport function updateTotalPrice(total) {\n  totalAmount.textContent = total.toFixed(2); \n}\n\nconst deleteAll = document.querySelector('.js-delete-all-btn');\ndeleteAll.addEventListener('click', () => {\n  cardListOrder.innerHTML = '';\n  shopStorage.removeAllProducts();\n  changeNumberInCart(0);\n  updateTotalPrice(0);\n  cartVisibillity(); \n});\n\nfunction storageChecked() {\n  const getLocalCart = shopStorage.getAllProducts() ?? [];\n  arrCarts = getLocalCart;\n  cardListOrder.innerHTML = cartProductMarkup(arrCarts);\n  changeNumberInCart(arrCarts.length);\n  updateTotalPrice(arrCarts.reduce((acc, item) => acc + item.price, 0)); \n}\n\nstorageChecked();\n\nfunction cartRemoveOrder(e) {\n  if (!e.target.closest('.cart-product-close-btn')) return;\n  const objFromLi = e.target.closest('li');\n  const dataIdItem = objFromLi.dataset.id;\n  const findElement = shopStorage\n    .getAllProducts()\n    .filter(item => item._id !== dataIdItem);\n  shopStorage.setAllProduct(findElement);\n  storageChecked();\n  updateTotalPrice(\n    findElement.reduce((acc, item) => acc + item.price, 0)\n  ); \n  if (!shopStorage.getAllProducts.length) cartVisibillity();\n}\n","import { ShopStorage } from '../local-storage';\nimport { FoodBoutiqueAPI } from '../bourique-api';\nimport Swal from 'sweetalert2';\nimport { openSuccessModal } from '../modal-succces'\nimport { updateTotalPrice } from './cart-product-list';\nimport { changeNumberInCart } from './cart-product-list';\nimport { cartVisibillity } from './cart-content';\n\nconst shopStorage = new ShopStorage('shop-storage');\nconst foodAPI = new FoodBoutiqueAPI();\n\nconst FormOrder = document.getElementById('subscription-form');\nconst cardListOrder = document.querySelector('.cart-list');\nconst emailInput = document.getElementById('email');\n\n\n\nfunction MessageSuccessformat(message) {\n  const Textsuccess = 'Order Success! ';\n  const index = message.indexOf(Textsuccess);\n  if (index !== -1) {\n    return message.slice(index + Textsuccessxt.length);\n  }\n  return message;\n}\n\n\nFormOrder.addEventListener('submit', async (event) => {\n  event.preventDefault();\n\n  const cartItems = shopStorage.getAllProducts();\n  const email = document.getElementById('email').value;\n\n  if (cartItems && cartItems.length > 0) {\n    const orderData = {\n      email: email,\n      products: cartItems.map(item => ({ productId: item._id, amount: 1 })),\n    };\n\n    try {\n      const response = await foodAPI.placeOrder(orderData);\n\n      if (response && response.message) {\n        shopStorage.removeAllProducts();\n        openSuccessModal();\n        const Titlemodal = document.querySelector('.modal-success-title');\n        const Messagemodal = document.querySelector('.modal-success-message');\n\n        Titlemodal.textContent = 'Order success';\n\n        Messagemodal.textContent = MessageSuccessformat(response.message);\n\n        cardListOrder.innerHTML = '';\n        emailInput.value = ''; \n        updateTotalPrice(0);\n        changeNumberInCart(shopStorage.getAllProducts().length);\n        cartVisibillity();\n      }\n    } catch (error) {\n      Swal.fire({\n        icon: 'error',\n        title: 'Error',\n        text: error.response.data.message,\n        showConfirmButton: true,\n        confirmButtonColor: '#6D8434',\n        showCancelButton: false,\n        customClass: {\n          popup: 'small-popup',\n          title: 'custom-title',\n          icon: 'custom-icon',\n        },\n      });\n    }\n  } else {\n    Swal.fire({\n      icon: 'error',\n      title: 'Error',\n      text: 'The cart is empty. Please add products to the cart!',\n      showConfirmButton: true,\n      confirmButtonColor: '#6D8434',\n      showCancelButton: false,\n      customClass: {\n        popup: 'small-popup',\n        title: 'custom-title',\n        icon: 'custom-icon',\n      },\n    });\n  }\n});\n"],"names":["SHOP_STORAGE","Storageshop","ShopStorage","ContentcartWrap","Cartempty","cartVisibillity","cartProductMarkup","arr","category","img","name","price","size","_id","arrCarts","cartNumberProduct","navSpan","totalAmount","cardListOrder","shopStorage","cartRemoveOrder","changeNumberInCart","number","updateTotalPrice","total","deleteAll","storageChecked","acc","item","e","dataIdItem","findElement","foodAPI","FoodBoutiqueAPI","FormOrder","emailInput","MessageSuccessformat","message","Textsuccess","index","event","cartItems","email","orderData","response","openSuccessModal","Titlemodal","Messagemodal","error","Swal"],"mappings":"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"}